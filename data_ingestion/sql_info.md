# Useful Sql Commands

- Get kids first schemas
```sql
select * from pg_catalog.pg_tables where tableowner like 'kf%';
```

![Snapshot of KF Schemas](/docs/kf-schemas.png "Generated by pgAdmin")

- Participants in Kids First Study
```sql
select 
	p.kf_id,
	p.study_id,
	p.created_at,
	p.gender,
	p.ethnicity,
	kf_study.program
from 
	participant as p
join
	(select study.program, kf_id
	 from study 
	 where study.program='Kids First') as kf_study
on 
	kf_study.kf_id=p.study_id
order by 
	p.created_at
asc;
``` 

![Snapshot of KF Participants](/docs/kf-participants.png "Generated by pgAdmin")

- Biospecimens of KF Participants
```sql
select
	b.kf_id,
	kf_parts.study_id,
	kf_parts.kf_id,
	b.created_at
from
	biospecimen as b
join
	(select 
		p.kf_id,
		p.study_id,
		p.created_at,
		p.gender,
		p.ethnicity,
		kf_study.program
	from 
		participant as p
	join
		(select study.program, kf_id
		 from study 
		 where study.program='Kids First') as kf_study
	on 
		kf_study.kf_id=p.study_id) as kf_parts
on
	kf_parts.kf_id = b.participant_id
order by 
	kf_parts.kf_id;
```

![Snapshot of Biospecimens for KF Participants](/docs/biospecimens_of_kf_participants.png "Generated by pgAdmin")

- Genomic Files of Biospecimens for KF Participants
```sql
select
	*
from
	biospecimen_genomic_file as bgf
join
	(select
		b.kf_id,
		kf_parts.study_id,
		--kf_parts.kf_id,
		b.created_at
	from
		biospecimen as b
	join
		(select 
			p.kf_id,
			p.study_id,
			p.created_at,
			p.gender,
			p.ethnicity,
			kf_study.program
		from 
			participant as p
		join
			(select study.program, kf_id
			 from study 
			 where study.program='Kids First') as kf_study
		on 
			kf_study.kf_id=p.study_id) as kf_parts
	on
		kf_parts.kf_id = b.participant_id) as kf_biospecimen
on
	kf_biospecimen.kf_id = bgf.biospecimen_id;
```

![Genomic Files of Biospecimens for KF Participants](tbd.png "Generated by pgAdmin")